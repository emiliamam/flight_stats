{"ast":null,"code":"var _excluded = [\"onMouseEnter\", \"onClick\", \"onMouseLeave\", \"shape\", \"activeShape\"],\n    _excluded2 = [\"stroke\", \"fill\", \"legendType\", \"hide\", \"isAnimationActive\", \"animationBegin\", \"animationDuration\", \"animationEasing\", \"nameKey\", \"lastShapeType\"];\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n\n  return t;\n}\n\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n\n  return e;\n}\n\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\n\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\n\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (\"string\" === r ? String : Number)(t);\n}\n\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n\n  var o,\n      r,\n      i = _objectWithoutPropertiesLoose(e, t);\n\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n\n    for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n\n  return i;\n}\n\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n\n  return t;\n}\n/* eslint-disable max-classes-per-file */\n\n\nimport * as React from 'react';\nimport { PureComponent, useCallback, useMemo, useRef, useState } from 'react';\nimport omit from 'es-toolkit/compat/omit';\nimport { clsx } from 'clsx';\nimport { selectActiveIndex } from '../state/selectors/selectors';\nimport { useAppSelector } from '../state/hooks';\nimport { Layer } from '../container/Layer';\nimport { LabelList } from '../component/LabelList';\nimport { Global } from '../util/Global';\nimport { interpolateNumber, isNumber } from '../util/DataUtils';\nimport { getValueByDataKey } from '../util/ChartUtils';\nimport { adaptEventsOfChild } from '../util/types';\nimport { FunnelTrapezoid } from '../util/FunnelUtils';\nimport { useMouseClickItemDispatch, useMouseEnterItemDispatch, useMouseLeaveItemDispatch } from '../context/tooltipContext';\nimport { SetTooltipEntrySettings } from '../state/SetTooltipEntrySettings';\nimport { selectFunnelTrapezoids } from '../state/selectors/funnelSelectors';\nimport { filterProps, findAllByType } from '../util/ReactUtils';\nimport { Cell } from '../component/Cell';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { Animate } from '../animation/Animate';\nimport { usePlotArea } from '../hooks';\n/**\n * Internal props, combination of external props + defaultProps + private Recharts state\n */\n\n/**\n * External props, intended for end users to fill in\n */\n\nfunction getTooltipEntrySettings(props) {\n  var {\n    dataKey,\n    nameKey,\n    stroke,\n    strokeWidth,\n    fill,\n    name,\n    hide,\n    tooltipType,\n    data\n  } = props;\n  return {\n    dataDefinedOnItem: data,\n    positions: props.trapezoids.map(_ref => {\n      var {\n        tooltipPosition\n      } = _ref;\n      return tooltipPosition;\n    }),\n    settings: {\n      stroke,\n      strokeWidth,\n      fill,\n      dataKey,\n      name,\n      nameKey,\n      hide,\n      type: tooltipType,\n      color: fill,\n      unit: '' // Funnel does not have unit, why?\n\n    }\n  };\n}\n\nfunction FunnelTrapezoids(props) {\n  var {\n    trapezoids,\n    allOtherFunnelProps,\n    showLabels\n  } = props;\n  var activeItemIndex = useAppSelector(state => selectActiveIndex(state, 'item', state.tooltip.settings.trigger, undefined));\n\n  var {\n    onMouseEnter: onMouseEnterFromProps,\n    onClick: onItemClickFromProps,\n    onMouseLeave: onMouseLeaveFromProps,\n    shape,\n    activeShape\n  } = allOtherFunnelProps,\n      restOfAllOtherProps = _objectWithoutProperties(allOtherFunnelProps, _excluded);\n\n  var onMouseEnterFromContext = useMouseEnterItemDispatch(onMouseEnterFromProps, allOtherFunnelProps.dataKey);\n  var onMouseLeaveFromContext = useMouseLeaveItemDispatch(onMouseLeaveFromProps);\n  var onClickFromContext = useMouseClickItemDispatch(onItemClickFromProps, allOtherFunnelProps.dataKey);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, trapezoids.map((entry, i) => {\n    var isActiveIndex = activeShape && activeItemIndex === String(i);\n    var trapezoidOptions = isActiveIndex ? activeShape : shape;\n\n    var trapezoidProps = _objectSpread(_objectSpread({}, entry), {}, {\n      option: trapezoidOptions,\n      isActive: isActiveIndex,\n      stroke: entry.stroke\n    });\n\n    return /*#__PURE__*/React.createElement(Layer, _extends({\n      className: \"recharts-funnel-trapezoid\"\n    }, adaptEventsOfChild(restOfAllOtherProps, entry, i), {\n      // @ts-expect-error the types need a bit of attention\n      onMouseEnter: onMouseEnterFromContext(entry, i) // @ts-expect-error the types need a bit of attention\n      ,\n      onMouseLeave: onMouseLeaveFromContext(entry, i) // @ts-expect-error the types need a bit of attention\n      ,\n      onClick: onClickFromContext(entry, i),\n      key: \"trapezoid-\".concat(entry === null || entry === void 0 ? void 0 : entry.x, \"-\").concat(entry === null || entry === void 0 ? void 0 : entry.y, \"-\").concat(entry === null || entry === void 0 ? void 0 : entry.name, \"-\").concat(entry === null || entry === void 0 ? void 0 : entry.value)\n    }), /*#__PURE__*/React.createElement(FunnelTrapezoid, trapezoidProps));\n  }), showLabels && LabelList.renderCallByParent(allOtherFunnelProps, trapezoids));\n}\n\nvar latestId = 0;\n/**\n * This hook will return a unique animation id for the given reference.\n * The ID increments every time the reference changes.\n * @param reference The reference to track\n * @returns The unique animation ID\n */\n\nfunction useAnimationId(reference) {\n  var idRef = useRef(latestId);\n  var ref = useRef(reference);\n\n  if (ref.current !== reference) {\n    idRef.current += 1;\n    latestId = idRef.current;\n    ref.current = reference;\n  }\n\n  return idRef.current;\n}\n\nfunction TrapezoidsWithAnimation(_ref2) {\n  var {\n    previousTrapezoidsRef,\n    props\n  } = _ref2;\n  var {\n    trapezoids,\n    isAnimationActive,\n    animationBegin,\n    animationDuration,\n    animationEasing,\n    onAnimationEnd,\n    onAnimationStart\n  } = props;\n  var prevTrapezoids = previousTrapezoidsRef.current;\n  var [isAnimating, setIsAnimating] = useState(true);\n  var animationId = useAnimationId(trapezoids);\n  var handleAnimationEnd = useCallback(() => {\n    if (typeof onAnimationEnd === 'function') {\n      onAnimationEnd();\n    }\n\n    setIsAnimating(false);\n  }, [onAnimationEnd]);\n  var handleAnimationStart = useCallback(() => {\n    if (typeof onAnimationStart === 'function') {\n      onAnimationStart();\n    }\n\n    setIsAnimating(true);\n  }, [onAnimationStart]);\n  return /*#__PURE__*/React.createElement(Animate, {\n    begin: animationBegin,\n    duration: animationDuration,\n    isActive: isAnimationActive,\n    easing: animationEasing,\n    from: {\n      t: 0\n    },\n    to: {\n      t: 1\n    },\n    key: animationId,\n    onAnimationStart: handleAnimationStart,\n    onAnimationEnd: handleAnimationEnd\n  }, _ref3 => {\n    var {\n      t\n    } = _ref3;\n    var stepData = t === 1 ? trapezoids : trapezoids.map((entry, index) => {\n      var prev = prevTrapezoids && prevTrapezoids[index];\n\n      if (prev) {\n        var _interpolatorX = interpolateNumber(prev.x, entry.x);\n\n        var _interpolatorY = interpolateNumber(prev.y, entry.y);\n\n        var _interpolatorUpperWidth = interpolateNumber(prev.upperWidth, entry.upperWidth);\n\n        var _interpolatorLowerWidth = interpolateNumber(prev.lowerWidth, entry.lowerWidth);\n\n        var _interpolatorHeight = interpolateNumber(prev.height, entry.height);\n\n        return _objectSpread(_objectSpread({}, entry), {}, {\n          x: _interpolatorX(t),\n          y: _interpolatorY(t),\n          upperWidth: _interpolatorUpperWidth(t),\n          lowerWidth: _interpolatorLowerWidth(t),\n          height: _interpolatorHeight(t)\n        });\n      }\n\n      var interpolatorX = interpolateNumber(entry.x + entry.upperWidth / 2, entry.x);\n      var interpolatorY = interpolateNumber(entry.y + entry.height / 2, entry.y);\n      var interpolatorUpperWidth = interpolateNumber(0, entry.upperWidth);\n      var interpolatorLowerWidth = interpolateNumber(0, entry.lowerWidth);\n      var interpolatorHeight = interpolateNumber(0, entry.height);\n      return _objectSpread(_objectSpread({}, entry), {}, {\n        x: interpolatorX(t),\n        y: interpolatorY(t),\n        upperWidth: interpolatorUpperWidth(t),\n        lowerWidth: interpolatorLowerWidth(t),\n        height: interpolatorHeight(t)\n      });\n    });\n\n    if (t > 0) {\n      // eslint-disable-next-line no-param-reassign\n      previousTrapezoidsRef.current = stepData;\n    }\n\n    return /*#__PURE__*/React.createElement(Layer, null, /*#__PURE__*/React.createElement(FunnelTrapezoids, {\n      trapezoids: stepData,\n      allOtherFunnelProps: props,\n      showLabels: !isAnimating\n    }));\n  });\n}\n\nfunction RenderTrapezoids(props) {\n  var {\n    trapezoids,\n    isAnimationActive\n  } = props;\n  var previousTrapezoidsRef = useRef(null);\n  var prevTrapezoids = previousTrapezoidsRef.current;\n\n  if (isAnimationActive && trapezoids && trapezoids.length && (!prevTrapezoids || prevTrapezoids !== trapezoids)) {\n    return /*#__PURE__*/React.createElement(TrapezoidsWithAnimation, {\n      props: props,\n      previousTrapezoidsRef: previousTrapezoidsRef\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(FunnelTrapezoids, {\n    trapezoids: trapezoids,\n    allOtherFunnelProps: props,\n    showLabels: true\n  });\n}\n\nvar getRealWidthHeight = (customWidth, offset) => {\n  var {\n    width,\n    height,\n    left,\n    right,\n    top,\n    bottom\n  } = offset;\n  var realHeight = height;\n  var realWidth = width;\n\n  if (isNumber(customWidth)) {\n    realWidth = customWidth;\n  } else if (typeof customWidth === 'string') {\n    realWidth = realWidth * parseFloat(customWidth) / 100;\n  }\n\n  return {\n    realWidth: realWidth - left - right - 50,\n    realHeight: realHeight - bottom - top,\n    offsetX: (width - realWidth) / 2,\n    offsetY: (height - realHeight) / 2\n  };\n};\n\nexport class FunnelWithState extends PureComponent {\n  render() {\n    var {\n      className\n    } = this.props;\n    var layerClass = clsx('recharts-trapezoids', className);\n    return /*#__PURE__*/React.createElement(Layer, {\n      className: layerClass\n    }, /*#__PURE__*/React.createElement(RenderTrapezoids, this.props));\n  }\n\n}\nvar defaultFunnelProps = {\n  stroke: '#fff',\n  fill: '#808080',\n  legendType: 'rect',\n  hide: false,\n  isAnimationActive: !Global.isSsr,\n  animationBegin: 400,\n  animationDuration: 1500,\n  animationEasing: 'ease',\n  nameKey: 'name',\n  lastShapeType: 'triangle'\n};\n\nfunction FunnelImpl(props) {\n  var {\n    height,\n    width\n  } = usePlotArea();\n\n  var _resolveDefaultProps = resolveDefaultProps(props, defaultFunnelProps),\n      {\n    stroke,\n    fill,\n    legendType,\n    hide,\n    isAnimationActive,\n    animationBegin,\n    animationDuration,\n    animationEasing,\n    nameKey,\n    lastShapeType\n  } = _resolveDefaultProps,\n      everythingElse = _objectWithoutProperties(_resolveDefaultProps, _excluded2);\n\n  var presentationProps = filterProps(props, false);\n  var cells = findAllByType(props.children, Cell);\n  var funnelSettings = useMemo(() => ({\n    dataKey: props.dataKey,\n    nameKey,\n    data: props.data,\n    tooltipType: props.tooltipType,\n    lastShapeType,\n    reversed: props.reversed,\n    customWidth: props.width,\n    cells,\n    presentationProps\n  }), [props.dataKey, nameKey, props.data, props.tooltipType, lastShapeType, props.reversed, props.width, cells, presentationProps]);\n  var {\n    trapezoids\n  } = useAppSelector(state => selectFunnelTrapezoids(state, funnelSettings));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SetTooltipEntrySettings, {\n    fn: getTooltipEntrySettings,\n    args: _objectSpread(_objectSpread({}, props), {}, {\n      trapezoids\n    })\n  }), hide ? null : /*#__PURE__*/React.createElement(FunnelWithState, _extends({}, everythingElse, {\n    stroke: stroke,\n    fill: fill,\n    nameKey: nameKey,\n    lastShapeType: lastShapeType,\n    animationBegin: animationBegin,\n    animationDuration: animationDuration,\n    animationEasing: animationEasing,\n    isAnimationActive: isAnimationActive,\n    hide: hide,\n    legendType: legendType,\n    height: height,\n    width: width,\n    trapezoids: trapezoids\n  })));\n}\n\nexport function computeFunnelTrapezoids(_ref4) {\n  var {\n    dataKey,\n    nameKey,\n    displayedData,\n    tooltipType,\n    lastShapeType,\n    reversed,\n    offset,\n    customWidth\n  } = _ref4;\n  var {\n    left,\n    top\n  } = offset;\n  var {\n    realHeight,\n    realWidth,\n    offsetX,\n    offsetY\n  } = getRealWidthHeight(customWidth, offset);\n  var maxValue = Math.max.apply(null, displayedData.map(entry => getValueByDataKey(entry, dataKey, 0)));\n  var len = displayedData.length;\n  var rowHeight = realHeight / len;\n  var parentViewBox = {\n    x: offset.left,\n    y: offset.top,\n    width: offset.width,\n    height: offset.height\n  };\n  var trapezoids = displayedData.map((entry, i) => {\n    var rawVal = getValueByDataKey(entry, dataKey, 0);\n    var name = getValueByDataKey(entry, nameKey, i);\n    var val = rawVal;\n    var nextVal;\n\n    if (i !== len - 1) {\n      nextVal = getValueByDataKey(displayedData[i + 1], dataKey, 0);\n\n      if (nextVal instanceof Array) {\n        [nextVal] = nextVal;\n      }\n    } else if (rawVal instanceof Array && rawVal.length === 2) {\n      [val, nextVal] = rawVal;\n    } else if (lastShapeType === 'rectangle') {\n      nextVal = val;\n    } else {\n      nextVal = 0;\n    } // @ts-expect-error getValueByDataKey does not validate the output type\n\n\n    var x = (maxValue - val) * realWidth / (2 * maxValue) + top + 25 + offsetX;\n    var y = rowHeight * i + left + offsetY; // @ts-expect-error getValueByDataKey does not validate the output type\n\n    var upperWidth = val / maxValue * realWidth;\n    var lowerWidth = nextVal / maxValue * realWidth;\n    var tooltipPayload = [{\n      name,\n      value: val,\n      payload: entry,\n      dataKey,\n      type: tooltipType\n    }];\n    var tooltipPosition = {\n      x: x + upperWidth / 2,\n      y: y + rowHeight / 2\n    };\n    return _objectSpread(_objectSpread({\n      x,\n      y,\n      width: Math.max(upperWidth, lowerWidth),\n      upperWidth,\n      lowerWidth,\n      height: rowHeight,\n      // @ts-expect-error getValueByDataKey does not validate the output type\n      name,\n      val,\n      tooltipPayload,\n      tooltipPosition\n    }, omit(entry, ['width'])), {}, {\n      payload: entry,\n      parentViewBox,\n      labelViewBox: {\n        x: x + (upperWidth - lowerWidth) / 4,\n        y,\n        width: Math.abs(upperWidth - lowerWidth) / 2 + Math.min(upperWidth, lowerWidth),\n        height: rowHeight\n      }\n    });\n  });\n\n  if (reversed) {\n    trapezoids = trapezoids.map((entry, index) => {\n      var newY = entry.y - index * rowHeight + (len - 1 - index) * rowHeight;\n      return _objectSpread(_objectSpread({}, entry), {}, {\n        upperWidth: entry.lowerWidth,\n        lowerWidth: entry.upperWidth,\n        x: entry.x - (entry.lowerWidth - entry.upperWidth) / 2,\n        y: entry.y - index * rowHeight + (len - 1 - index) * rowHeight,\n        tooltipPosition: _objectSpread(_objectSpread({}, entry.tooltipPosition), {}, {\n          y: newY + rowHeight / 2\n        }),\n        labelViewBox: _objectSpread(_objectSpread({}, entry.labelViewBox), {}, {\n          y: newY\n        })\n      });\n    });\n  }\n\n  return {\n    trapezoids,\n    data: displayedData\n  };\n}\nexport class Funnel extends PureComponent {\n  render() {\n    return /*#__PURE__*/React.createElement(FunnelImpl, this.props);\n  }\n\n}\n\n_defineProperty(Funnel, \"displayName\", 'Funnel');\n\n_defineProperty(Funnel, \"defaultProps\", defaultFunnelProps);","map":{"version":3,"sources":["/Users/emiliamamedova/charts/flightStats/node_modules/recharts/es6/cartesian/Funnel.js"],"names":["_excluded","_excluded2","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","ownKeys","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","_objectWithoutProperties","_objectWithoutPropertiesLoose","indexOf","propertyIsEnumerable","React","PureComponent","useCallback","useMemo","useRef","useState","omit","clsx","selectActiveIndex","useAppSelector","Layer","LabelList","Global","interpolateNumber","isNumber","getValueByDataKey","adaptEventsOfChild","FunnelTrapezoid","useMouseClickItemDispatch","useMouseEnterItemDispatch","useMouseLeaveItemDispatch","SetTooltipEntrySettings","selectFunnelTrapezoids","filterProps","findAllByType","Cell","resolveDefaultProps","Animate","usePlotArea","getTooltipEntrySettings","props","dataKey","nameKey","stroke","strokeWidth","fill","name","hide","tooltipType","data","dataDefinedOnItem","positions","trapezoids","map","_ref","tooltipPosition","settings","type","color","unit","FunnelTrapezoids","allOtherFunnelProps","showLabels","activeItemIndex","state","tooltip","trigger","undefined","onMouseEnter","onMouseEnterFromProps","onClick","onItemClickFromProps","onMouseLeave","onMouseLeaveFromProps","shape","activeShape","restOfAllOtherProps","onMouseEnterFromContext","onMouseLeaveFromContext","onClickFromContext","createElement","Fragment","entry","isActiveIndex","trapezoidOptions","trapezoidProps","option","isActive","className","key","concat","x","y","renderCallByParent","latestId","useAnimationId","reference","idRef","ref","current","TrapezoidsWithAnimation","_ref2","previousTrapezoidsRef","isAnimationActive","animationBegin","animationDuration","animationEasing","onAnimationEnd","onAnimationStart","prevTrapezoids","isAnimating","setIsAnimating","animationId","handleAnimationEnd","handleAnimationStart","begin","duration","easing","from","to","_ref3","stepData","index","prev","_interpolatorX","_interpolatorY","_interpolatorUpperWidth","upperWidth","_interpolatorLowerWidth","lowerWidth","_interpolatorHeight","height","interpolatorX","interpolatorY","interpolatorUpperWidth","interpolatorLowerWidth","interpolatorHeight","RenderTrapezoids","getRealWidthHeight","customWidth","offset","width","left","right","top","bottom","realHeight","realWidth","parseFloat","offsetX","offsetY","FunnelWithState","render","layerClass","defaultFunnelProps","legendType","isSsr","lastShapeType","FunnelImpl","_resolveDefaultProps","everythingElse","presentationProps","cells","children","funnelSettings","reversed","fn","args","computeFunnelTrapezoids","_ref4","displayedData","maxValue","Math","max","len","rowHeight","parentViewBox","rawVal","val","nextVal","Array","tooltipPayload","payload","labelViewBox","abs","min","newY","Funnel"],"mappings":"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","sourcesContent":["var _excluded = [\"onMouseEnter\", \"onClick\", \"onMouseLeave\", \"shape\", \"activeShape\"],\n  _excluded2 = [\"stroke\", \"fill\", \"legendType\", \"hide\", \"isAnimationActive\", \"animationBegin\", \"animationDuration\", \"animationEasing\", \"nameKey\", \"lastShapeType\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\n/* eslint-disable max-classes-per-file */\nimport * as React from 'react';\nimport { PureComponent, useCallback, useMemo, useRef, useState } from 'react';\nimport omit from 'es-toolkit/compat/omit';\nimport { clsx } from 'clsx';\nimport { selectActiveIndex } from '../state/selectors/selectors';\nimport { useAppSelector } from '../state/hooks';\nimport { Layer } from '../container/Layer';\nimport { LabelList } from '../component/LabelList';\nimport { Global } from '../util/Global';\nimport { interpolateNumber, isNumber } from '../util/DataUtils';\nimport { getValueByDataKey } from '../util/ChartUtils';\nimport { adaptEventsOfChild } from '../util/types';\nimport { FunnelTrapezoid } from '../util/FunnelUtils';\nimport { useMouseClickItemDispatch, useMouseEnterItemDispatch, useMouseLeaveItemDispatch } from '../context/tooltipContext';\nimport { SetTooltipEntrySettings } from '../state/SetTooltipEntrySettings';\nimport { selectFunnelTrapezoids } from '../state/selectors/funnelSelectors';\nimport { filterProps, findAllByType } from '../util/ReactUtils';\nimport { Cell } from '../component/Cell';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { Animate } from '../animation/Animate';\nimport { usePlotArea } from '../hooks';\n\n/**\n * Internal props, combination of external props + defaultProps + private Recharts state\n */\n\n/**\n * External props, intended for end users to fill in\n */\n\nfunction getTooltipEntrySettings(props) {\n  var {\n    dataKey,\n    nameKey,\n    stroke,\n    strokeWidth,\n    fill,\n    name,\n    hide,\n    tooltipType,\n    data\n  } = props;\n  return {\n    dataDefinedOnItem: data,\n    positions: props.trapezoids.map(_ref => {\n      var {\n        tooltipPosition\n      } = _ref;\n      return tooltipPosition;\n    }),\n    settings: {\n      stroke,\n      strokeWidth,\n      fill,\n      dataKey,\n      name,\n      nameKey,\n      hide,\n      type: tooltipType,\n      color: fill,\n      unit: '' // Funnel does not have unit, why?\n    }\n  };\n}\nfunction FunnelTrapezoids(props) {\n  var {\n    trapezoids,\n    allOtherFunnelProps,\n    showLabels\n  } = props;\n  var activeItemIndex = useAppSelector(state => selectActiveIndex(state, 'item', state.tooltip.settings.trigger, undefined));\n  var {\n      onMouseEnter: onMouseEnterFromProps,\n      onClick: onItemClickFromProps,\n      onMouseLeave: onMouseLeaveFromProps,\n      shape,\n      activeShape\n    } = allOtherFunnelProps,\n    restOfAllOtherProps = _objectWithoutProperties(allOtherFunnelProps, _excluded);\n  var onMouseEnterFromContext = useMouseEnterItemDispatch(onMouseEnterFromProps, allOtherFunnelProps.dataKey);\n  var onMouseLeaveFromContext = useMouseLeaveItemDispatch(onMouseLeaveFromProps);\n  var onClickFromContext = useMouseClickItemDispatch(onItemClickFromProps, allOtherFunnelProps.dataKey);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, trapezoids.map((entry, i) => {\n    var isActiveIndex = activeShape && activeItemIndex === String(i);\n    var trapezoidOptions = isActiveIndex ? activeShape : shape;\n    var trapezoidProps = _objectSpread(_objectSpread({}, entry), {}, {\n      option: trapezoidOptions,\n      isActive: isActiveIndex,\n      stroke: entry.stroke\n    });\n    return /*#__PURE__*/React.createElement(Layer, _extends({\n      className: \"recharts-funnel-trapezoid\"\n    }, adaptEventsOfChild(restOfAllOtherProps, entry, i), {\n      // @ts-expect-error the types need a bit of attention\n      onMouseEnter: onMouseEnterFromContext(entry, i)\n      // @ts-expect-error the types need a bit of attention\n      ,\n      onMouseLeave: onMouseLeaveFromContext(entry, i)\n      // @ts-expect-error the types need a bit of attention\n      ,\n      onClick: onClickFromContext(entry, i),\n      key: \"trapezoid-\".concat(entry === null || entry === void 0 ? void 0 : entry.x, \"-\").concat(entry === null || entry === void 0 ? void 0 : entry.y, \"-\").concat(entry === null || entry === void 0 ? void 0 : entry.name, \"-\").concat(entry === null || entry === void 0 ? void 0 : entry.value)\n    }), /*#__PURE__*/React.createElement(FunnelTrapezoid, trapezoidProps));\n  }), showLabels && LabelList.renderCallByParent(allOtherFunnelProps, trapezoids));\n}\nvar latestId = 0;\n\n/**\n * This hook will return a unique animation id for the given reference.\n * The ID increments every time the reference changes.\n * @param reference The reference to track\n * @returns The unique animation ID\n */\nfunction useAnimationId(reference) {\n  var idRef = useRef(latestId);\n  var ref = useRef(reference);\n  if (ref.current !== reference) {\n    idRef.current += 1;\n    latestId = idRef.current;\n    ref.current = reference;\n  }\n  return idRef.current;\n}\nfunction TrapezoidsWithAnimation(_ref2) {\n  var {\n    previousTrapezoidsRef,\n    props\n  } = _ref2;\n  var {\n    trapezoids,\n    isAnimationActive,\n    animationBegin,\n    animationDuration,\n    animationEasing,\n    onAnimationEnd,\n    onAnimationStart\n  } = props;\n  var prevTrapezoids = previousTrapezoidsRef.current;\n  var [isAnimating, setIsAnimating] = useState(true);\n  var animationId = useAnimationId(trapezoids);\n  var handleAnimationEnd = useCallback(() => {\n    if (typeof onAnimationEnd === 'function') {\n      onAnimationEnd();\n    }\n    setIsAnimating(false);\n  }, [onAnimationEnd]);\n  var handleAnimationStart = useCallback(() => {\n    if (typeof onAnimationStart === 'function') {\n      onAnimationStart();\n    }\n    setIsAnimating(true);\n  }, [onAnimationStart]);\n  return /*#__PURE__*/React.createElement(Animate, {\n    begin: animationBegin,\n    duration: animationDuration,\n    isActive: isAnimationActive,\n    easing: animationEasing,\n    from: {\n      t: 0\n    },\n    to: {\n      t: 1\n    },\n    key: animationId,\n    onAnimationStart: handleAnimationStart,\n    onAnimationEnd: handleAnimationEnd\n  }, _ref3 => {\n    var {\n      t\n    } = _ref3;\n    var stepData = t === 1 ? trapezoids : trapezoids.map((entry, index) => {\n      var prev = prevTrapezoids && prevTrapezoids[index];\n      if (prev) {\n        var _interpolatorX = interpolateNumber(prev.x, entry.x);\n        var _interpolatorY = interpolateNumber(prev.y, entry.y);\n        var _interpolatorUpperWidth = interpolateNumber(prev.upperWidth, entry.upperWidth);\n        var _interpolatorLowerWidth = interpolateNumber(prev.lowerWidth, entry.lowerWidth);\n        var _interpolatorHeight = interpolateNumber(prev.height, entry.height);\n        return _objectSpread(_objectSpread({}, entry), {}, {\n          x: _interpolatorX(t),\n          y: _interpolatorY(t),\n          upperWidth: _interpolatorUpperWidth(t),\n          lowerWidth: _interpolatorLowerWidth(t),\n          height: _interpolatorHeight(t)\n        });\n      }\n      var interpolatorX = interpolateNumber(entry.x + entry.upperWidth / 2, entry.x);\n      var interpolatorY = interpolateNumber(entry.y + entry.height / 2, entry.y);\n      var interpolatorUpperWidth = interpolateNumber(0, entry.upperWidth);\n      var interpolatorLowerWidth = interpolateNumber(0, entry.lowerWidth);\n      var interpolatorHeight = interpolateNumber(0, entry.height);\n      return _objectSpread(_objectSpread({}, entry), {}, {\n        x: interpolatorX(t),\n        y: interpolatorY(t),\n        upperWidth: interpolatorUpperWidth(t),\n        lowerWidth: interpolatorLowerWidth(t),\n        height: interpolatorHeight(t)\n      });\n    });\n    if (t > 0) {\n      // eslint-disable-next-line no-param-reassign\n      previousTrapezoidsRef.current = stepData;\n    }\n    return /*#__PURE__*/React.createElement(Layer, null, /*#__PURE__*/React.createElement(FunnelTrapezoids, {\n      trapezoids: stepData,\n      allOtherFunnelProps: props,\n      showLabels: !isAnimating\n    }));\n  });\n}\nfunction RenderTrapezoids(props) {\n  var {\n    trapezoids,\n    isAnimationActive\n  } = props;\n  var previousTrapezoidsRef = useRef(null);\n  var prevTrapezoids = previousTrapezoidsRef.current;\n  if (isAnimationActive && trapezoids && trapezoids.length && (!prevTrapezoids || prevTrapezoids !== trapezoids)) {\n    return /*#__PURE__*/React.createElement(TrapezoidsWithAnimation, {\n      props: props,\n      previousTrapezoidsRef: previousTrapezoidsRef\n    });\n  }\n  return /*#__PURE__*/React.createElement(FunnelTrapezoids, {\n    trapezoids: trapezoids,\n    allOtherFunnelProps: props,\n    showLabels: true\n  });\n}\nvar getRealWidthHeight = (customWidth, offset) => {\n  var {\n    width,\n    height,\n    left,\n    right,\n    top,\n    bottom\n  } = offset;\n  var realHeight = height;\n  var realWidth = width;\n  if (isNumber(customWidth)) {\n    realWidth = customWidth;\n  } else if (typeof customWidth === 'string') {\n    realWidth = realWidth * parseFloat(customWidth) / 100;\n  }\n  return {\n    realWidth: realWidth - left - right - 50,\n    realHeight: realHeight - bottom - top,\n    offsetX: (width - realWidth) / 2,\n    offsetY: (height - realHeight) / 2\n  };\n};\nexport class FunnelWithState extends PureComponent {\n  render() {\n    var {\n      className\n    } = this.props;\n    var layerClass = clsx('recharts-trapezoids', className);\n    return /*#__PURE__*/React.createElement(Layer, {\n      className: layerClass\n    }, /*#__PURE__*/React.createElement(RenderTrapezoids, this.props));\n  }\n}\nvar defaultFunnelProps = {\n  stroke: '#fff',\n  fill: '#808080',\n  legendType: 'rect',\n  hide: false,\n  isAnimationActive: !Global.isSsr,\n  animationBegin: 400,\n  animationDuration: 1500,\n  animationEasing: 'ease',\n  nameKey: 'name',\n  lastShapeType: 'triangle'\n};\nfunction FunnelImpl(props) {\n  var {\n    height,\n    width\n  } = usePlotArea();\n  var _resolveDefaultProps = resolveDefaultProps(props, defaultFunnelProps),\n    {\n      stroke,\n      fill,\n      legendType,\n      hide,\n      isAnimationActive,\n      animationBegin,\n      animationDuration,\n      animationEasing,\n      nameKey,\n      lastShapeType\n    } = _resolveDefaultProps,\n    everythingElse = _objectWithoutProperties(_resolveDefaultProps, _excluded2);\n  var presentationProps = filterProps(props, false);\n  var cells = findAllByType(props.children, Cell);\n  var funnelSettings = useMemo(() => ({\n    dataKey: props.dataKey,\n    nameKey,\n    data: props.data,\n    tooltipType: props.tooltipType,\n    lastShapeType,\n    reversed: props.reversed,\n    customWidth: props.width,\n    cells,\n    presentationProps\n  }), [props.dataKey, nameKey, props.data, props.tooltipType, lastShapeType, props.reversed, props.width, cells, presentationProps]);\n  var {\n    trapezoids\n  } = useAppSelector(state => selectFunnelTrapezoids(state, funnelSettings));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SetTooltipEntrySettings, {\n    fn: getTooltipEntrySettings,\n    args: _objectSpread(_objectSpread({}, props), {}, {\n      trapezoids\n    })\n  }), hide ? null : /*#__PURE__*/React.createElement(FunnelWithState, _extends({}, everythingElse, {\n    stroke: stroke,\n    fill: fill,\n    nameKey: nameKey,\n    lastShapeType: lastShapeType,\n    animationBegin: animationBegin,\n    animationDuration: animationDuration,\n    animationEasing: animationEasing,\n    isAnimationActive: isAnimationActive,\n    hide: hide,\n    legendType: legendType,\n    height: height,\n    width: width,\n    trapezoids: trapezoids\n  })));\n}\nexport function computeFunnelTrapezoids(_ref4) {\n  var {\n    dataKey,\n    nameKey,\n    displayedData,\n    tooltipType,\n    lastShapeType,\n    reversed,\n    offset,\n    customWidth\n  } = _ref4;\n  var {\n    left,\n    top\n  } = offset;\n  var {\n    realHeight,\n    realWidth,\n    offsetX,\n    offsetY\n  } = getRealWidthHeight(customWidth, offset);\n  var maxValue = Math.max.apply(null, displayedData.map(entry => getValueByDataKey(entry, dataKey, 0)));\n  var len = displayedData.length;\n  var rowHeight = realHeight / len;\n  var parentViewBox = {\n    x: offset.left,\n    y: offset.top,\n    width: offset.width,\n    height: offset.height\n  };\n  var trapezoids = displayedData.map((entry, i) => {\n    var rawVal = getValueByDataKey(entry, dataKey, 0);\n    var name = getValueByDataKey(entry, nameKey, i);\n    var val = rawVal;\n    var nextVal;\n    if (i !== len - 1) {\n      nextVal = getValueByDataKey(displayedData[i + 1], dataKey, 0);\n      if (nextVal instanceof Array) {\n        [nextVal] = nextVal;\n      }\n    } else if (rawVal instanceof Array && rawVal.length === 2) {\n      [val, nextVal] = rawVal;\n    } else if (lastShapeType === 'rectangle') {\n      nextVal = val;\n    } else {\n      nextVal = 0;\n    }\n\n    // @ts-expect-error getValueByDataKey does not validate the output type\n    var x = (maxValue - val) * realWidth / (2 * maxValue) + top + 25 + offsetX;\n    var y = rowHeight * i + left + offsetY;\n    // @ts-expect-error getValueByDataKey does not validate the output type\n    var upperWidth = val / maxValue * realWidth;\n    var lowerWidth = nextVal / maxValue * realWidth;\n    var tooltipPayload = [{\n      name,\n      value: val,\n      payload: entry,\n      dataKey,\n      type: tooltipType\n    }];\n    var tooltipPosition = {\n      x: x + upperWidth / 2,\n      y: y + rowHeight / 2\n    };\n    return _objectSpread(_objectSpread({\n      x,\n      y,\n      width: Math.max(upperWidth, lowerWidth),\n      upperWidth,\n      lowerWidth,\n      height: rowHeight,\n      // @ts-expect-error getValueByDataKey does not validate the output type\n      name,\n      val,\n      tooltipPayload,\n      tooltipPosition\n    }, omit(entry, ['width'])), {}, {\n      payload: entry,\n      parentViewBox,\n      labelViewBox: {\n        x: x + (upperWidth - lowerWidth) / 4,\n        y,\n        width: Math.abs(upperWidth - lowerWidth) / 2 + Math.min(upperWidth, lowerWidth),\n        height: rowHeight\n      }\n    });\n  });\n  if (reversed) {\n    trapezoids = trapezoids.map((entry, index) => {\n      var newY = entry.y - index * rowHeight + (len - 1 - index) * rowHeight;\n      return _objectSpread(_objectSpread({}, entry), {}, {\n        upperWidth: entry.lowerWidth,\n        lowerWidth: entry.upperWidth,\n        x: entry.x - (entry.lowerWidth - entry.upperWidth) / 2,\n        y: entry.y - index * rowHeight + (len - 1 - index) * rowHeight,\n        tooltipPosition: _objectSpread(_objectSpread({}, entry.tooltipPosition), {}, {\n          y: newY + rowHeight / 2\n        }),\n        labelViewBox: _objectSpread(_objectSpread({}, entry.labelViewBox), {}, {\n          y: newY\n        })\n      });\n    });\n  }\n  return {\n    trapezoids,\n    data: displayedData\n  };\n}\nexport class Funnel extends PureComponent {\n  render() {\n    return /*#__PURE__*/React.createElement(FunnelImpl, this.props);\n  }\n}\n_defineProperty(Funnel, \"displayName\", 'Funnel');\n_defineProperty(Funnel, \"defaultProps\", defaultFunnelProps);"]},"metadata":{},"sourceType":"module"}