{"ast":null,"code":"var _jsxFileName = \"/Users/emiliamamedova/charts/project_corona_tracker/src/components/Chart/Chart.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { Bar, Pie, Line } from 'react-chartjs-2';\n\nconst Analytics = () => {\n  const [activeTab, setActiveTab] = useState('top3');\n  const [top3Data, setTop3Data] = useState([]);\n  const [directionData, setDirectionData] = useState([]);\n  const [punctualityData, setPunctualityData] = useState([]);\n  useEffect(() => {\n    fetch('http://localhost:8000/get_top3').then(res => res.json()).then(data => setTop3Data(data)).catch(console.error);\n    fetch('http://localhost:8000/get_all_direction').then(res => res.json()).then(data => setDirectionData(data)).catch(console.error);\n    fetch('http://localhost:8000/get_airline_punctuality').then(res => res.json()).then(data => setPunctualityData(data)).catch(console.error);\n  }, []);\n  console.log(top3Data, 'top3Data');\n  console.log(directionData, 'directionData');\n  console.log(punctualityData, 'punctualityData'); // 1. Топ 3 авиакомпании - Bar chart\n\n  const top3ChartData = {\n    labels: top3Data.map(a => a.airline_name),\n    datasets: [{\n      label: 'Пунктуальность вылета',\n      backgroundColor: 'rgba(75,192,192,0.6)',\n      data: top3Data.map(a => a.rating_departure)\n    }, {\n      label: 'Пунктуальность прилёта',\n      backgroundColor: 'rgba(153,102,255,0.6)',\n      data: top3Data.map(a => a.rating_arrival)\n    }]\n  }; // 2. Направления - Pie chart (адаптируем под твой формат)\n\n  const directionsLabels = directionData.map(d => `${d.airport1} → ${d.airport2}`);\n  const directionsCounts = directionData.map(d => d.total_flights);\n  const directionsChartData = {\n    labels: directionsLabels,\n    datasets: [{\n      label: 'Количество рейсов',\n      data: directionsCounts,\n      backgroundColor: directionsLabels.map(() => `hsl(${Math.floor(Math.random() * 360)}, 70%, 70%)`)\n    }]\n  }; // 3. Пунктуальность - Line chart\n  // Здесь предположим, что punctualityData — массив с {date, airline, punctuality} или похожими\n\n  const dates = Array.from(new Set(punctualityData.map(d => d.date))).sort();\n  const airlines = Array.from(new Set(punctualityData.map(d => d.airline)));\n  const punctualityDatasets = airlines.map((airline, idx) => ({\n    label: airline,\n    data: dates.map(date => {\n      const record = punctualityData.find(d => d.airline === airline && d.date === date);\n      return record ? record.punctuality : null;\n    }),\n    borderColor: `hsl(${idx * 60 % 360}, 70%, 50%)`,\n    fill: false\n  }));\n  const punctualityChartData = {\n    labels: dates,\n    datasets: punctualityDatasets\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginBottom: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setActiveTab('top3'),\n    disabled: activeTab === 'top3',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, \"\\u0422\\u043E\\u043F 3 \\u0430\\u0432\\u0438\\u0430\\u043A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u0438\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setActiveTab('directions'),\n    disabled: activeTab === 'directions',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, \"\\u041D\\u0430\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setActiveTab('punctuality'),\n    disabled: activeTab === 'punctuality',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, \"\\u041F\\u0443\\u043D\\u043A\\u0442\\u0443\\u0430\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u044C\")), activeTab === 'top3' && /*#__PURE__*/React.createElement(Bar, {\n    data: top3ChartData,\n    options: {\n      responsive: true,\n      plugins: {\n        title: {\n          display: true,\n          text: 'Топ 3 авиакомпании по пунктуальности'\n        }\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }), activeTab === 'directions' && /*#__PURE__*/React.createElement(Pie, {\n    data: directionsChartData,\n    options: {\n      responsive: true,\n      plugins: {\n        title: {\n          display: true,\n          text: 'Распределение рейсов по направлениям'\n        }\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }), activeTab === 'punctuality' && /*#__PURE__*/React.createElement(Line, {\n    data: punctualityChartData,\n    options: {\n      responsive: true,\n      plugins: {\n        title: {\n          display: true,\n          text: 'Динамика пунктуальности авиакомпаний'\n        }\n      },\n      scales: {\n        y: {\n          min: 0,\n          max: 100,\n          title: {\n            display: true,\n            text: 'Пунктуальность (%)'\n          }\n        },\n        x: {\n          title: {\n            display: true,\n            text: 'Дата'\n          }\n        }\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default Analytics;","map":{"version":3,"sources":["/Users/emiliamamedova/charts/project_corona_tracker/src/components/Chart/Chart.jsx"],"names":["React","useState","useEffect","Bar","Pie","Line","Analytics","activeTab","setActiveTab","top3Data","setTop3Data","directionData","setDirectionData","punctualityData","setPunctualityData","fetch","then","res","json","data","catch","console","error","log","top3ChartData","labels","map","a","airline_name","datasets","label","backgroundColor","rating_departure","rating_arrival","directionsLabels","d","airport1","airport2","directionsCounts","total_flights","directionsChartData","Math","floor","random","dates","Array","from","Set","date","sort","airlines","airline","punctualityDatasets","idx","record","find","punctuality","borderColor","fill","punctualityChartData","marginBottom","responsive","plugins","title","display","text","scales","y","min","max","x"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Bar, Pie, Line } from 'react-chartjs-2';\n\nconst Analytics = () => {\n  const [activeTab, setActiveTab] = useState('top3');\n  const [top3Data, setTop3Data] = useState([]);\n  const [directionData, setDirectionData] = useState([]);\n  const [punctualityData, setPunctualityData] = useState([]);\n\n  useEffect(() => {\n    fetch('http://localhost:8000/get_top3')\n      .then(res => res.json())\n      .then(data => setTop3Data(data))\n      .catch(console.error);\n\n    fetch('http://localhost:8000/get_all_direction')\n      .then(res => res.json())\n      .then(data => setDirectionData(data))\n      .catch(console.error);\n\n    fetch('http://localhost:8000/get_airline_punctuality')\n      .then(res => res.json())\n      .then(data => setPunctualityData(data))\n      .catch(console.error);\n  }, []);\n\n  console.log(top3Data, 'top3Data')\n  console.log(directionData, 'directionData')\n  console.log(punctualityData, 'punctualityData')\n\n  // 1. Топ 3 авиакомпании - Bar chart\n  const top3ChartData = {\n    labels: top3Data.map(a => a.airline_name),\n    datasets: [\n      {\n        label: 'Пунктуальность вылета',\n        backgroundColor: 'rgba(75,192,192,0.6)',\n        data: top3Data.map(a => a.rating_departure),\n      },\n      {\n        label: 'Пунктуальность прилёта',\n        backgroundColor: 'rgba(153,102,255,0.6)',\n        data: top3Data.map(a => a.rating_arrival),\n      },\n    ],\n  };\n\n  // 2. Направления - Pie chart (адаптируем под твой формат)\n  const directionsLabels = directionData.map(d => `${d.airport1} → ${d.airport2}`);\n  const directionsCounts = directionData.map(d => d.total_flights);\n\n  const directionsChartData = {\n    labels: directionsLabels,\n    datasets: [\n      {\n        label: 'Количество рейсов',\n        data: directionsCounts,\n        backgroundColor: directionsLabels.map(() =>\n          `hsl(${Math.floor(Math.random() * 360)}, 70%, 70%)`\n        ),\n      },\n    ],\n  };\n\n  // 3. Пунктуальность - Line chart\n  // Здесь предположим, что punctualityData — массив с {date, airline, punctuality} или похожими\n  const dates = Array.from(new Set(punctualityData.map(d => d.date))).sort();\n  const airlines = Array.from(new Set(punctualityData.map(d => d.airline)));\n\n  const punctualityDatasets = airlines.map((airline, idx) => ({\n    label: airline,\n    data: dates.map(date => {\n      const record = punctualityData.find(d => d.airline === airline && d.date === date);\n      return record ? record.punctuality : null;\n    }),\n    borderColor: `hsl(${(idx * 60) % 360}, 70%, 50%)`,\n    fill: false,\n  }));\n\n  const punctualityChartData = {\n    labels: dates,\n    datasets: punctualityDatasets,\n  };\n\n  return (\n    <div>\n      <div style={{ marginBottom: 20 }}>\n        <button onClick={() => setActiveTab('top3')} disabled={activeTab === 'top3'}>\n          Топ 3 авиакомпании\n        </button>\n        <button onClick={() => setActiveTab('directions')} disabled={activeTab === 'directions'}>\n          Направления\n        </button>\n        <button onClick={() => setActiveTab('punctuality')} disabled={activeTab === 'punctuality'}>\n          Пунктуальность\n        </button>\n      </div>\n\n      {activeTab === 'top3' && (\n        <Bar\n          data={top3ChartData}\n          options={{\n            responsive: true,\n            plugins: {\n              title: { display: true, text: 'Топ 3 авиакомпании по пунктуальности' },\n            },\n          }}\n        />\n      )}\n\n      {activeTab === 'directions' && (\n        <Pie\n          data={directionsChartData}\n          options={{\n            responsive: true,\n            plugins: {\n              title: { display: true, text: 'Распределение рейсов по направлениям' },\n            },\n          }}\n        />\n      )}\n\n      {activeTab === 'punctuality' && (\n        <Line\n          data={punctualityChartData}\n          options={{\n            responsive: true,\n            plugins: {\n              title: { display: true, text: 'Динамика пунктуальности авиакомпаний' },\n            },\n            scales: {\n              y: { min: 0, max: 100, title: { display: true, text: 'Пунктуальность (%)' } },\n              x: { title: { display: true, text: 'Дата' } },\n            },\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Analytics;\n"]},"metadata":{},"sourceType":"module"}