{"ast":null,"code":"var _jsxFileName = \"/Users/emiliamamedova/charts/flightStats/src/components/Cards/PunctualityDashboard.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { LineChart, Line, XAxis, YAxis, Tooltip, Legend, ResponsiveContainer, CartesianGrid } from 'recharts';\nimport useFlightStats from '../../shared/useFlightStats';\nconst delayStats = [{\n  time: '08:00',\n  onTime: 45,\n  delayed: 10,\n  canceled: 2\n}, {\n  time: '09:00',\n  onTime: 50,\n  delayed: 8,\n  canceled: 1\n}, {\n  time: '10:00',\n  onTime: 48,\n  delayed: 12,\n  canceled: 3\n}, {\n  time: '11:00',\n  onTime: 52,\n  delayed: 6,\n  canceled: 1\n}, {\n  time: '12:00',\n  onTime: 47,\n  delayed: 15,\n  canceled: 4\n}, {\n  time: '13:00',\n  onTime: 51,\n  delayed: 9,\n  canceled: 0\n}];\n\nconst getColor = key => {\n  switch (key) {\n    case 'green':\n      return '#34c38f';\n\n    case 'yellow':\n      return '#f1b44c';\n\n    case 'red':\n      return '#f46a6a';\n\n    case 'blue':\n      return '#556ee6';\n\n    default:\n      return '#ccc';\n  }\n};\n\nconst th = {\n  padding: '12px',\n  borderBottom: '1px solid #ddd',\n  textAlign: 'left',\n  fontWeight: 600\n};\nconst td = {\n  padding: '10px 12px',\n  borderBottom: '1px solid #eee'\n};\nconst summaryData = [{\n  label: 'Вылетели вовремя',\n  value: 130,\n  color: 'green'\n}, {\n  label: 'С задержкой > 15 м',\n  value: 28,\n  color: 'yellow'\n}, {\n  label: 'Отменены',\n  value: 3,\n  color: 'red'\n}, {\n  label: 'Рейсов в воздухе сейчас',\n  value: 57,\n  color: 'blue'\n}];\nconst airportsData = [{\n  name: 'Шереметьево',\n  onTime: 92,\n  avgDelay: 5,\n  canceled: 5\n}, {\n  name: 'Домодедово',\n  onTime: 87,\n  avgDelay: 8,\n  canceled: 9\n}, {\n  name: 'Владивосток',\n  onTime: 83,\n  avgDelay: 9,\n  canceled: 4\n}, {\n  name: 'Казань',\n  onTime: 81,\n  avgDelay: 10,\n  canceled: 7\n}, {\n  name: 'Пулково',\n  onTime: 77,\n  avgDelay: 12,\n  canceled: 10\n}, {\n  name: 'Сочи',\n  onTime: 75,\n  avgDelay: 14,\n  canceled: 8\n}];\n\nconst PunctualityDashboard = ({\n  handleCountryChange\n}) => {\n  const [airportStats, setAirportStats] = useState(null);\n  const [topAirlines, setTopAirlines] = useState([]);\n  const [delayStats, setDelayStats] = useState(null);\n  useEffect(() => {\n    fetch('http://localhost:8000/airports/SVO/stats').then(res => res.json()).then(data => setAirportStats(data));\n    fetch('http://localhost:8000/airlines/top').then(res => res.json()).then(data => setTopAirlines(data));\n    fetch('http://localhost:8000/airlines/AFL/delay-stats').then(res => res.json()).then(data => setDelayStats(data));\n  }, []);\n  const delayPieData = (delayStats === null || delayStats === void 0 ? void 0 : delayStats.category_counts) ? Object.entries(delayStats.category_counts).map(([key, value]) => ({\n    name: key,\n    value\n  })) : [];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }, \"\\u0421\\u0438\\u0442\\u0443\\u0430\\u0446\\u0438\\u043E\\u043D\\u043D\\u044B\\u0439 \\u0446\\u0435\\u043D\\u0442\\u0440 \\u043F\\u0443\\u043D\\u043A\\u0442\\u0443\\u0430\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438\"), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"dashboard-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, \"\\uD83D\\uDCCD \\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430 \\u043F\\u043E \\u0430\\u044D\\u0440\\u043E\\u043F\\u043E\\u0440\\u0442\\u0443 SVO\"), airportStats ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"airport-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0439: \", airportStats.departures), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, \"\\u041F\\u0440\\u0438\\u0431\\u044B\\u0442\\u0438\\u044F: \", airportStats.arrivals), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"\\u0411\\u0435\\u0437 \\u0444\\u0430\\u043A\\u0442\\u0430 \\u0432\\u044B\\u043B\\u0435\\u0442\\u0430: \", airportStats.missing_departure), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"\\u0411\\u0435\\u0437 \\u0444\\u0430\\u043A\\u0442\\u0430 \\u043F\\u0440\\u0438\\u043B\\u0435\\u0442\\u0430: \", airportStats.missing_arrival)) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\")), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"dashboard-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, \"\\u2708\\uFE0F \\u0422\\u041E\\u041F \\u0430\\u0432\\u0438\\u0430\\u043A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u0439 \\u043F\\u043E \\u043F\\u0443\\u043D\\u043A\\u0442\\u0443\\u0430\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438\"), /*#__PURE__*/React.createElement(ResponsiveContainer, {\n    width: \"100%\",\n    height: 300,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(BarChart, {\n    data: topAirlines,\n    margin: {\n      top: 20,\n      right: 30,\n      left: 20,\n      bottom: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(XAxis, {\n    dataKey: \"iata_code\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(YAxis, {\n    domain: [0, 1],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Tooltip, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Legend, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    dataKey: \"rating_departure\",\n    fill: \"#00C49F\",\n    name: \"\\u0412\\u044B\\u043B\\u0435\\u0442\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    dataKey: \"rating_arrival\",\n    fill: \"#FF8042\",\n    name: \"\\u041F\\u0440\\u0438\\u043B\\u0435\\u0442\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"dashboard-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, \"\\u23F1 \\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430 \\u0437\\u0430\\u0434\\u0435\\u0440\\u0436\\u0435\\u043A \\u0434\\u043B\\u044F AFL\"), /*#__PURE__*/React.createElement(ResponsiveContainer, {\n    width: \"100%\",\n    height: 300,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(PieChart, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Pie, {\n    data: delayPieData,\n    cx: \"50%\",\n    cy: \"50%\",\n    labelLine: false,\n    outerRadius: 100,\n    fill: \"#8884d8\",\n    dataKey: \"value\",\n    label: ({\n      name\n    }) => name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, delayPieData.map((entry, index) => /*#__PURE__*/React.createElement(Cell, {\n    key: `cell-${index}`,\n    fill: COLORS[index % COLORS.length],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(Tooltip, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, \"\\u0421\\u0440\\u0435\\u0434\\u043D\\u044F\\u044F \\u0437\\u0430\\u0434\\u0435\\u0440\\u0436\\u043A\\u0430: \", delayStats === null || delayStats === void 0 ? void 0 : delayStats.average_delay_seconds, \" \\u0441\\u0435\\u043A\")));\n};\n\nexport default PunctualityDashboard;","map":{"version":3,"sources":["/Users/emiliamamedova/charts/flightStats/src/components/Cards/PunctualityDashboard.jsx"],"names":["React","useState","useEffect","LineChart","Line","XAxis","YAxis","Tooltip","Legend","ResponsiveContainer","CartesianGrid","useFlightStats","delayStats","time","onTime","delayed","canceled","getColor","key","th","padding","borderBottom","textAlign","fontWeight","td","summaryData","label","value","color","airportsData","name","avgDelay","PunctualityDashboard","handleCountryChange","airportStats","setAirportStats","topAirlines","setTopAirlines","setDelayStats","fetch","then","res","json","data","delayPieData","category_counts","Object","entries","map","departures","arrivals","missing_departure","missing_arrival","top","right","left","bottom","entry","index","COLORS","length","average_delay_seconds"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  CartesianGrid,\n} from 'recharts';\nimport useFlightStats from '../../shared/useFlightStats';\n\nconst delayStats = [\n  { time: '08:00', onTime: 45, delayed: 10, canceled: 2 },\n  { time: '09:00', onTime: 50, delayed: 8, canceled: 1 },\n  { time: '10:00', onTime: 48, delayed: 12, canceled: 3 },\n  { time: '11:00', onTime: 52, delayed: 6, canceled: 1 },\n  { time: '12:00', onTime: 47, delayed: 15, canceled: 4 },\n  { time: '13:00', onTime: 51, delayed: 9, canceled: 0 },\n];\n\nconst getColor = (key) => {\n  switch (key) {\n    case 'green':\n      return '#34c38f';\n    case 'yellow':\n      return '#f1b44c';\n    case 'red':\n      return '#f46a6a';\n    case 'blue':\n      return '#556ee6';\n    default:\n      return '#ccc';\n  }\n};\n\nconst th = {\n  padding: '12px',\n  borderBottom: '1px solid #ddd',\n  textAlign: 'left',\n  fontWeight: 600,\n};\n\nconst td = {\n  padding: '10px 12px',\n  borderBottom: '1px solid #eee',\n};\n\nconst summaryData = [\n  { label: 'Вылетели вовремя', value: 130, color: 'green' },\n  { label: 'С задержкой > 15 м', value: 28, color: 'yellow' },\n  { label: 'Отменены', value: 3, color: 'red' },\n  { label: 'Рейсов в воздухе сейчас', value: 57, color: 'blue'},\n];\n\nconst airportsData = [\n  { name: 'Шереметьево', onTime: 92, avgDelay: 5, canceled: 5 },\n  { name: 'Домодедово', onTime: 87, avgDelay: 8, canceled: 9 },\n  { name: 'Владивосток', onTime: 83, avgDelay: 9, canceled: 4 },\n  { name: 'Казань', onTime: 81, avgDelay: 10, canceled: 7 },\n  { name: 'Пулково', onTime: 77, avgDelay: 12, canceled: 10 },\n  { name: 'Сочи', onTime: 75, avgDelay: 14, canceled: 8 },\n];\nconst PunctualityDashboard = ({ handleCountryChange }) => {\n  const [airportStats, setAirportStats] = useState(null);\n  const [topAirlines, setTopAirlines] = useState([]);\n  const [delayStats, setDelayStats] = useState(null);\n\n  useEffect(() => {\n    fetch('http://localhost:8000/airports/SVO/stats')\n      .then(res => res.json())\n      .then(data => setAirportStats(data));\n\n    fetch('http://localhost:8000/airlines/top')\n      .then(res => res.json())\n      .then(data => setTopAirlines(data));\n\n    fetch('http://localhost:8000/airlines/AFL/delay-stats')\n      .then(res => res.json())\n      .then(data => setDelayStats(data));\n  }, []);\n\n  const delayPieData = delayStats?.category_counts\n    ? Object.entries(delayStats.category_counts).map(([key, value]) => ({ name: key, value }))\n    : [];\n\n  return (\n    <div className=\"dashboard-container\">\n      <h1>Ситуационный центр пунктуальности</h1>\n\n      <section className=\"dashboard-section\">\n        <h2>📍 Статистика по аэропорту SVO</h2>\n        {airportStats ? (\n          <div className=\"airport-card\">\n            <p>Отправлений: {airportStats.departures}</p>\n            <p>Прибытия: {airportStats.arrivals}</p>\n            <p>Без факта вылета: {airportStats.missing_departure}</p>\n            <p>Без факта прилета: {airportStats.missing_arrival}</p>\n          </div>\n        ) : <p>Загрузка...</p>}\n      </section>\n\n      <section className=\"dashboard-section\">\n        <h2>✈️ ТОП авиакомпаний по пунктуальности</h2>\n        <ResponsiveContainer width=\"100%\" height={300}>\n          <BarChart data={topAirlines} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>\n            <XAxis dataKey=\"iata_code\" />\n            <YAxis domain={[0, 1]} />\n            <Tooltip />\n            <Legend />\n            <Bar dataKey=\"rating_departure\" fill=\"#00C49F\" name=\"Вылет\" />\n            <Bar dataKey=\"rating_arrival\" fill=\"#FF8042\" name=\"Прилет\" />\n          </BarChart>\n        </ResponsiveContainer>\n      </section>\n\n      <section className=\"dashboard-section\">\n        <h2>⏱ Статистика задержек для AFL</h2>\n        <ResponsiveContainer width=\"100%\" height={300}>\n          <PieChart>\n            <Pie\n              data={delayPieData}\n              cx=\"50%\"\n              cy=\"50%\"\n              labelLine={false}\n              outerRadius={100}\n              fill=\"#8884d8\"\n              dataKey=\"value\"\n              label={({ name }) => name}\n            >\n              {delayPieData.map((entry, index) => (\n                <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n              ))}\n            </Pie>\n            <Tooltip />\n          </PieChart>\n        </ResponsiveContainer>\n        <p>Средняя задержка: {delayStats?.average_delay_seconds} сек</p>\n      </section>\n    </div>\n  );\n}\n\nexport default PunctualityDashboard;\n"]},"metadata":{},"sourceType":"module"}