{"ast":null,"code":"var _jsxFileName = \"/Users/emiliamamedova/charts/project_corona_tracker/src/components/Chart/Chart.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { Line, Bar } from 'react-chartjs-2';\nimport { fetchDailyData } from '../../api';\nimport styles from './Chart.module.css';\nconst sampleFlights = [{\n  flightNumber: \"SU123\",\n  airportIATA: \"YKS\",\n  scheduledArrival: \"2025-07-17T10:00:00Z\",\n  actualArrival: \"2025-07-17T10:10:00Z\"\n}, {\n  flightNumber: \"SU124\",\n  airportIATA: \"YKS\",\n  scheduledArrival: \"2025-07-17T11:00:00Z\",\n  actualArrival: \"2025-07-17T11:30:00Z\"\n}, {\n  flightNumber: \"SU125\",\n  airportIATA: \"MJZ\",\n  scheduledArrival: \"2025-07-17T12:00:00Z\",\n  actualArrival: \"2025-07-17T12:05:00Z\"\n}, {\n  flightNumber: \"SU126\",\n  airportIATA: \"KHV\",\n  scheduledArrival: \"2025-07-17T13:00:00Z\",\n  actualArrival: \"2025-07-17T13:25:00Z\"\n}, {\n  flightNumber: \"SU127\",\n  airportIATA: \"KHV\",\n  scheduledArrival: \"2025-07-17T14:00:00Z\",\n  actualArrival: \"2025-07-17T14:00:00Z\"\n}];\n\nconst Chart = ({\n  data: {\n    confirmed,\n    recovered,\n    deaths\n  },\n  country\n}) => {\n  const [dailyData, setDailyData] = useState({});\n  const [airports, setAirports] = useState([]);\n  const [punctualityData, setPunctualityData] = useState(null);\n  useEffect(() => {\n    const fetchMyAPI = async () => {\n      const initialDailyData = await fetchDailyData();\n      setAirports(initialDailyData);\n    };\n\n    fetchMyAPI();\n  }, []);\n  useEffect(() => {\n    if (airports.length === 0) return; // Подсчёт статистики по аэропортам\n\n    const stats = airports.map(({\n      IATA,\n      City\n    }) => {\n      const flightsAtAirport = sampleFlights.filter(f => f.airportIATA === IATA);\n      if (flightsAtAirport.length === 0) return null;\n      const onTimeCount = flightsAtAirport.filter(flight => {\n        const scheduled = new Date(flight.scheduledArrival);\n        const actual = new Date(flight.actualArrival);\n        const delayMins = (actual - scheduled) / 60000;\n        return delayMins <= 15;\n      }).length;\n      const punctualityPercent = onTimeCount / flightsAtAirport.length * 100;\n      return {\n        airport: City,\n        punctualityPercent\n      };\n    }).filter(Boolean); // Сортируем по пунктуальности\n\n    stats.sort((a, b) => b.punctualityPercent - a.punctualityPercent); // Формируем данные для графика\n\n    setPunctualityData({\n      labels: stats.map(s => s.airport),\n      datasets: [{\n        label: '% On Time (≤15 min delay)',\n        backgroundColor: 'rgba(75,192,192,0.6)',\n        data: stats.map(s => s.punctualityPercent)\n      }]\n    });\n  }, [airports]);\n  if (!punctualityData) return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 32\n    }\n  }, \"Loading...\");\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: 700,\n      margin: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, \"\\u0420\\u0435\\u0439\\u0442\\u0438\\u043D\\u0433 \\u043F\\u0443\\u043D\\u043A\\u0442\\u0443\\u0430\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438 \\u0430\\u044D\\u0440\\u043E\\u043F\\u043E\\u0440\\u0442\\u043E\\u0432\"), /*#__PURE__*/React.createElement(Bar, {\n    data: punctualityData,\n    options: {\n      scales: {\n        y: {\n          beginAtZero: true,\n          max: 100,\n          title: {\n            display: true,\n            text: '%'\n          }\n        }\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Chart;","map":{"version":3,"sources":["/Users/emiliamamedova/charts/project_corona_tracker/src/components/Chart/Chart.jsx"],"names":["React","useState","useEffect","Line","Bar","fetchDailyData","styles","sampleFlights","flightNumber","airportIATA","scheduledArrival","actualArrival","Chart","data","confirmed","recovered","deaths","country","dailyData","setDailyData","airports","setAirports","punctualityData","setPunctualityData","fetchMyAPI","initialDailyData","length","stats","map","IATA","City","flightsAtAirport","filter","f","onTimeCount","flight","scheduled","Date","actual","delayMins","punctualityPercent","airport","Boolean","sort","a","b","labels","s","datasets","label","backgroundColor","maxWidth","margin","scales","y","beginAtZero","max","title","display","text"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Line, Bar } from 'react-chartjs-2';\n\nimport { fetchDailyData } from '../../api';\n\nimport styles from './Chart.module.css';\n\nconst sampleFlights = [\n  { flightNumber: \"SU123\", airportIATA: \"YKS\", scheduledArrival: \"2025-07-17T10:00:00Z\", actualArrival: \"2025-07-17T10:10:00Z\" },\n  { flightNumber: \"SU124\", airportIATA: \"YKS\", scheduledArrival: \"2025-07-17T11:00:00Z\", actualArrival: \"2025-07-17T11:30:00Z\" },\n  { flightNumber: \"SU125\", airportIATA: \"MJZ\", scheduledArrival: \"2025-07-17T12:00:00Z\", actualArrival: \"2025-07-17T12:05:00Z\" },\n  { flightNumber: \"SU126\", airportIATA: \"KHV\", scheduledArrival: \"2025-07-17T13:00:00Z\", actualArrival: \"2025-07-17T13:25:00Z\" },\n  { flightNumber: \"SU127\", airportIATA: \"KHV\", scheduledArrival: \"2025-07-17T14:00:00Z\", actualArrival: \"2025-07-17T14:00:00Z\" },\n];\n\n\nconst Chart = ({ data: { confirmed, recovered, deaths }, country }) => {\n  const [dailyData, setDailyData] = useState({});\n  const [airports, setAirports] = useState([]);\n  const [punctualityData, setPunctualityData] = useState(null);\n\n  useEffect(() => {\n    const fetchMyAPI = async () => {\n      const initialDailyData = await fetchDailyData();\n\n      setAirports(initialDailyData);\n    };\n\n    fetchMyAPI();\n  }, []);\n\n  useEffect(() => {\n    if (airports.length === 0) return;\n\n    // Подсчёт статистики по аэропортам\n    const stats = airports.map(({ IATA, City }) => {\n      const flightsAtAirport = sampleFlights.filter(f => f.airportIATA === IATA);\n      if (flightsAtAirport.length === 0) return null;\n\n      const onTimeCount = flightsAtAirport.filter(flight => {\n        const scheduled = new Date(flight.scheduledArrival);\n        const actual = new Date(flight.actualArrival);\n        const delayMins = (actual - scheduled) / 60000;\n        return delayMins <= 15;\n      }).length;\n\n      const punctualityPercent = (onTimeCount / flightsAtAirport.length) * 100;\n\n      return {\n        airport: City,\n        punctualityPercent,\n      };\n    }).filter(Boolean);\n\n    // Сортируем по пунктуальности\n    stats.sort((a, b) => b.punctualityPercent - a.punctualityPercent);\n\n    // Формируем данные для графика\n    setPunctualityData({\n      labels: stats.map(s => s.airport),\n      datasets: [{\n        label: '% On Time (≤15 min delay)',\n        backgroundColor: 'rgba(75,192,192,0.6)',\n        data: stats.map(s => s.punctualityPercent),\n      }],\n    });\n\n  }, [airports]);\n\n  if (!punctualityData) return <div>Loading...</div>;\n\n  return (\n    <div style={{ maxWidth: 700, margin: 'auto' }}>\n      <h2>Рейтинг пунктуальности аэропортов</h2>\n      <Bar data={punctualityData} options={{ \n        scales: {\n          y: { beginAtZero: true, max: 100, title: { display: true, text: '%' } }\n        }\n      }} />\n    </div>\n  );\n};\nexport default Chart;\n"]},"metadata":{},"sourceType":"module"}